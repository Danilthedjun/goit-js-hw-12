{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport default async function getImages(query, page) {\n  const KEY = '42530509-bac56eefb83244286f2e71aac';\n  const API_URL = 'https://pixabay.com/api/';\n  const IMAGE_TYPE = 'photo';\n  const ORIENTATION = 'horizontal';\n  const SAFESEARCH = 'true';\n  const PER_PAGE = 15;\n  const LINK = `${API_URL}?key=${KEY}&q=${query}&image_type=${IMAGE_TYPE}&orientation=${ORIENTATION}&safesearch=${SAFESEARCH}&per_page=${PER_PAGE}&page=${page}`;\n\n  const response = await axios.get(LINK);\n  return response.data;\n}\n","export default function createGallery(images) {\n  return images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n   <li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n  </a>\n  <div class=\"stats\">\n  <p>Likes<br/>${likes}</p>\n  <p>Views<br/>${views}</p>\n  <p>Commens<br/>${comments}</p>\n  <p>Downloads<br/>${downloads}</p>\n</div>\n</li>\n  `\n    )\n    .join('');\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst gallery = document.querySelector('.gallery');\nconst form = document.querySelector('form');\nconst addMoreButton = document.querySelector('.add-more');\nconst spinner = document.querySelector('.spiner');\nlet totalHits;\nlet lightbox;\n\nimport getImages from './js/pixabay-api';\nimport createGallery from './js/render-functions';\n\nfunction updateGallery(query, page) {\n  const loader = document.createElement('div');\n  loader.classList.add('loader');\n  form.insertAdjacentElement('afterend', loader);\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery-link', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  }\n  getImages(query, page)\n    .then(data => {\n      totalHits = data.totalHits;\n      if (data.hits.length === 0) {\n        addMoreButton.classList.remove('is-viseble');\n        iziToast.error({\n          color: 'yellow',\n          position: 'topRight',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n      } else {\n        gallery.innerHTML += createGallery(data.hits);\n        addMoreButton.classList.add('is-viseble');\n        spinner.classList.remove('spiner-isV');\n        window.scrollBy({\n          top: 460,\n          left: 0,\n          behavior: 'smooth',\n        });\n      }\n    })\n    .catch(error => {\n      gallery.innerHTML = `<p>Gallery creation failed</p>`;\n    })\n    .finally(() => {\n      loader.remove();\n      lightbox.refresh();\n    });\n}\nlet currentQuery;\nlet page;\n\nform.addEventListener('submit', event => {\n  event.preventDefault();\n  gallery.innerHTML = null;\n  const query = event.target.search.value.trim();\n  page = 1;\n  updateGallery(query, page);\n  currentQuery = query;\n  form.reset();\n});\naddMoreButton.addEventListener('click', event => {\n  if (page > totalHits / 15) {\n    addMoreButton.classList.remove('is-viseble');\n    return iziToast.error({\n      position: 'topRight',\n      message: \"We're sorry, there are no more posts to load\",\n      color: 'yellow',\n    });\n  }\n  page++;\n  updateGallery(currentQuery, page);\n  spinner.classList.add('spiner-isV');\n});\n"],"names":["getImages","query","page","LINK","axios","createGallery","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","gallery","form","addMoreButton","spinner","totalHits","lightbox","updateGallery","loader","SimpleLightbox","data","iziToast","error","currentQuery","event"],"mappings":"owBAEe,eAAeA,EAAUC,EAAOC,EAAM,CAOnD,MAAMC,EAAO,qEAA2BF,CAAK,6EAA2GC,CAAI,GAG5J,OADiB,MAAME,EAAM,IAAID,CAAI,GACrB,IAClB,CCbe,SAASE,EAAcC,EAAQ,CAC5C,OAAOA,EACJ,IACC,CAAC,CACC,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA;AAAA,kCAEsBL,CAAa;AAAA,sCACTD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,iBAG/CC,CAAK;AAAA,iBACLC,CAAK;AAAA,mBACHC,CAAQ;AAAA,qBACNC,CAAS;AAAA;AAAA;AAAA,GAIzB,EACA,KAAK,EAAE,CACZ,CCrBA,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAO,SAAS,cAAc,MAAM,EACpCC,EAAgB,SAAS,cAAc,WAAW,EAClDC,EAAU,SAAS,cAAc,SAAS,EAChD,IAAIC,EACAC,EAKJ,SAASC,EAAcnB,EAAOC,EAAM,CAClC,MAAMmB,EAAS,SAAS,cAAc,KAAK,EAC3CA,EAAO,UAAU,IAAI,QAAQ,EAC7BN,EAAK,sBAAsB,WAAYM,CAAM,EACxCF,IACHA,EAAW,IAAIG,EAAe,gBAAiB,CAC7C,aAAc,MACd,aAAc,GACpB,CAAK,GAEHtB,EAAUC,EAAOC,CAAI,EAClB,KAAKqB,GAAQ,CACZL,EAAYK,EAAK,UACbA,EAAK,KAAK,SAAW,GACvBP,EAAc,UAAU,OAAO,YAAY,EAC3CQ,EAAS,MAAM,CACb,MAAO,SACP,SAAU,WACV,QACE,0EACZ,CAAS,IAEDV,EAAQ,WAAaT,EAAckB,EAAK,IAAI,EAC5CP,EAAc,UAAU,IAAI,YAAY,EACxCC,EAAQ,UAAU,OAAO,YAAY,EACrC,OAAO,SAAS,CACd,IAAK,IACL,KAAM,EACN,SAAU,QACpB,CAAS,EAET,CAAK,EACA,MAAMQ,GAAS,CACdX,EAAQ,UAAY,gCAC1B,CAAK,EACA,QAAQ,IAAM,CACbO,EAAO,OAAM,EACbF,EAAS,QAAO,CACtB,CAAK,CACL,CACA,IAAIO,EACAxB,EAEJa,EAAK,iBAAiB,SAAUY,GAAS,CACvCA,EAAM,eAAc,EACpBb,EAAQ,UAAY,KACpB,MAAMb,EAAQ0B,EAAM,OAAO,OAAO,MAAM,OACxCzB,EAAO,EACPkB,EAAcnB,EAAOC,CAAI,EACzBwB,EAAezB,EACfc,EAAK,MAAK,CACZ,CAAC,EACDC,EAAc,iBAAiB,QAASW,GAAS,CAC/C,GAAIzB,EAAOgB,EAAY,GACrB,OAAAF,EAAc,UAAU,OAAO,YAAY,EACpCQ,EAAS,MAAM,CACpB,SAAU,WACV,QAAS,+CACT,MAAO,QACb,CAAK,EAEHtB,IACAkB,EAAcM,EAAcxB,CAAI,EAChCe,EAAQ,UAAU,IAAI,YAAY,CACpC,CAAC"}